:root {
  --bg: #0f172a;            /* slate-900 */
  --panel: #111827;         /* gray-900 */
  --text: #e5e7eb;          /* gray-200 */
  --muted: #9ca3af;         /* gray-400 */
  --accent: #22d3ee;        /* cyan-400 */
  --accent-strong: #06b6d4; /* cyan-500 */
  --good: #34d399;          /* emerald-400 */
  --warn: #fbbf24;          /* amber-400 */
  --danger: #f87171;        /* red-400 */

  --radius: 16px;
  --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);

  /* Flip animation custom properties */
  --start-rot: 0deg;
  --delta-rot: 0deg;
  --spins: 3;
  --flip-duration: 800ms;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html, body {
  height: 100%;
}

body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text);
  background: radial-gradient(1200px 800px at 50% -20%, #1f2937 0%, var(--bg) 50%, #0b1222 100%);
  display: flex;
  flex-direction: column;
  align-items: center;
}

.site-header, .site-footer {
  width: 100%;
  max-width: 960px;
  padding: 16px;
}

.site-header h1 {
  text-align: center;
  margin: 24px 0 8px;
  letter-spacing: 0.5px;
}

.container {
  width: 100%;
  max-width: 960px;
  padding: 16px;
  display: grid;
  place-items: center;
}

.coin-area {
  width: min(720px, 92vw);
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: clamp(16px, 3vw, 32px);
}

.coin-wrapper {
  display: grid;
  place-items: center;
  margin: 16px 0 8px;
  perspective: 1000px;
}

.coin {
  width: clamp(140px, 30vw, 220px);
  height: clamp(140px, 30vw, 220px);
  border-radius: 50%;
  position: relative;
  transform-style: preserve-3d;
  background: radial-gradient(circle at 40% 35%, #374151, #111827 70%);
  box-shadow:
    inset 0 6px 14px rgba(0,0,0,0.4),
    inset 0 -6px 14px rgba(255,255,255,0.06),
    0 16px 40px rgba(0,0,0,0.45);
  transition: transform 260ms ease;
  will-change: transform;
}

/* Static orientation by face */
.coin[data-face="heads"] { transform: rotateY(0deg); }
.coin[data-face="tails"] { transform: rotateY(180deg); }

/* Faces */
.face {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-weight: 700;
  font-size: clamp(22px, 4.5vw, 36px);
  color: #fff;
  border-radius: 50%;
  backface-visibility: hidden;
  user-select: none;
  letter-spacing: 1px;
}
.face.front {
  text-shadow: 0 1px 0 rgba(0,0,0,0.3), 0 0 20px rgba(34,211,238,0.6);
}
.face.back {
  transform: rotateY(180deg);
  text-shadow: 0 1px 0 rgba(0,0,0,0.3), 0 0 20px rgba(248,113,113,0.6);
}

/* Flip animation */
@keyframes coin-flip {
  0%   { transform: rotateY(var(--start-rot)); }
  100% { transform: rotateY(calc(var(--start-rot) + var(--delta-rot) + var(--spins) * 360deg)); }
}

.coin.flipping {
  animation: coin-flip var(--flip-duration) ease-in-out both;
  transition: none; /* avoid static transform transitions during animation */
}

.controls {
  display: flex;
  gap: 12px;
  justify-content: center;
  margin: 12px 0 8px;
  flex-wrap: wrap;
}

.btn {
  cursor: pointer;
  border: 1px solid rgba(255,255,255,0.16);
  background: rgba(255,255,255,0.04);
  color: var(--text);
  padding: 10px 16px;
  border-radius: 10px;
  font-size: 16px;
  min-width: 96px;
  transition: background 160ms ease, transform 80ms ease, border-color 160ms ease;
}
.btn:hover {
  background: rgba(255,255,255,0.08);
}
.btn.primary {
  border-color: rgba(34,211,238,0.35);
  background: linear-gradient(180deg, rgba(34,211,238,0.15), rgba(34,211,238,0.05));
}
.btn.primary:hover {
  border-color: rgba(34,211,238,0.55);
  background: linear-gradient(180deg, rgba(34,211,238,0.22), rgba(34,211,238,0.08));
}
.btn:active {
  transform: translateY(1px);
}
.btn:disabled,
.btn[aria-disabled="true"] {
  opacity: 0.6;
  cursor: not-allowed;
}

.result {
  text-align: center;
  margin: 10px 0 14px;
  min-height: 1.5em;
  font-size: 18px;
}

.stats {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
  margin-top: 8px;
}
.stat {
  display: grid;
  gap: 6px;
  justify-items: center;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.03);
}
.stat .label {
  color: var(--muted);
  font-size: 14px;
}
.stat .value {
  font-size: 22px;
  font-weight: 700;
}

.history {
  margin-top: 18px;
}
.history h2 {
  text-align: center;
  font-size: 18px;
  margin: 0 0 10px;
  color: var(--muted);
}
.history-list {
  list-style: none;
  padding: 0;
  margin: 0 auto;
  max-width: 480px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
  gap: 8px;
}
.history-list li {
  text-align: center;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.03);
  font-weight: 600;
}
.history-list li.heads { color: var(--good); border-color: rgba(52,211,153,0.35); }
.history-list li.tails { color: var(--danger); border-color: rgba(248,113,113,0.35); }

/* Focus visibility and skip link */
:where(a, button, [tabindex]):focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 3px;
  border-radius: 10px;
}
.skip-link {
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip-link:focus {
  position: static;
  width: auto;
  height: auto;
  padding: 8px 12px;
  background: #000;
  color: #fff;
  border-radius: 8px;
  margin: 8px;
}

/* Utilities */
.visually-hidden {
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .coin.flipping {
    animation-duration: 1ms;
  }
  .btn, .coin {
    transition: none !important;
  }
}
